<html>
    <body>
        <div>
            <p id="q1">
                <button>closure1</button>
                <button>closure2</button>
                <button>closure3</button>
            </p>
        </div>
    </body>
    <script>
        const console_divider = (subject) => console.log(`------------${subject}-------------`);
        const exampler = (fnc, subject) => {
            console_divider(subject);
            fnc();
            console.log('\n');
        }

        /* Hoisting */
        exampler(() => {
            for(var i_1=0; i_1<3; i_1++){}
            console.log(`Result of JS Hoisting -> i_1 = ${i_1}`);
        }, 'Hoisting')
        

        
        /* Closure */
        exampler(() => {
            let name = 'lee';
            const printName = () => {
                console.log(`Result of Closure -> name = ${name}`); // printName func remember name variable memory location
            }
            name = 'kim';
            printName();
        }, 'Closure')
       

        /* Hoisting & Closure */
        exampler(() => {
            /* i_2 is just one variable because of hoisting */
            for(var i_2=0; i_2<3; i_2++){
                /* 3 index (let)variables in for loop are all indepenedent variable */
                let index = i_2;
                /* onclick listener func will remember index value as free-variable because of closure */
                document.querySelector('#q1').children[index].onclick = () => console.log(`Button ${index} Click Result : ${i_2}`);
            }
            if(typeof(index) === "undefined"){
                console.log('index variable is gone after for loop');
            }
        }, 'Hoisting & Closure')
        

        /* Arrow Function */
        exampler(() => {
            const object_1 = {
                fnc: function(){
                    console.log(this);  // fnc
                    const arr = [1,2,3,4];
                    arr.forEach(e => {
                        if(e == 1) console.log(this);   // fnc thanks to arrow function
                    });
                    arr.forEach(function(e){
                        if(e == 1) console.log(this);   // window. without arrow func, 'var that = this' / function.bind(this) is used.
                    });
                }
            }
            object_1.fnc();
        }, 'Arrow Function');
        


    </script>
</html>